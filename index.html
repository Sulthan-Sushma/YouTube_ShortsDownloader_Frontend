<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YouTube Video Downloader</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>YouTube Video Downloader</h1>
    <input type="text" id="videoLink" placeholder="Enter YouTube Video URL">
    <button onclick="downloadVideo()">Download</button>
    <div id="response"></div>

    <script>
    async function downloadVideo() {
        const link = document.getElementById('videoLink').value;
        const responseDiv = document.getElementById('response');

        if (!link) {
            responseDiv.textContent = "Please enter a YouTube URL";
            return;
        }

        responseDiv.textContent = "Downloading... Please wait...";

        try {
            const formData = new FormData();
            formData.append('link', link); // Must match backend parameter name

            const response = await fetch(
                "youtubeshortsdownloaderbackend-production-9aec.up.railway.app",
                {
                    method: "POST",
                    body: formData
                }
            );

            const result = await response.json();

            if (result.status === "success") {
                // Show a clickable download link to the user
                responseDiv.innerHTML = `
                    <p>Download ready:</p>
                    <a href="${result.file}" target="_blank" download>Click here to download your video</a>
                    <p>(Link expires in 10 minutes)</p>
                `;
            } else {
                responseDiv.textContent = `Error: ${result.error || "Unknown error"}`;
            }

        } catch (error) {
            responseDiv.textContent = `Network Error: ${error.message}`;
            console.error('Detailed error:', error);
        }
    }
    </script>
</body>
</html>
